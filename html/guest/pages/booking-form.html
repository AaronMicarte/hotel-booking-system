<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Booking - HellHotel</title>

    <!-- External CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../../assets/css/style.css">
    <link rel="stylesheet" href="../../../assets/css/booking-form.css">
</head>

<body>
    <!-- Header will be injected here -->
    <div id="header-container"></div>

    <div class="container mt-5 pt-3">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="../index.html#rooms">Room Selection</a></li>
                <li class="breadcrumb-item active">Booking Details</li>
            </ol>
        </nav>

        <div class="row">
            <!-- Booking Form -->
            <div class="col-lg-8">
                <div class="card shadow-sm booking-card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0"><i class="fas fa-user-plus me-2"></i>Complete Your 24-Hour Booking</h4>
                        <small class="opacity-75">Please fill in all required information</small>
                    </div>
                    <div class="card-body">
                        <!-- Progress Steps -->
                        <div class="booking-progress mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <small class="step-label active" data-step="1">Guest Information</small>
                                <small class="step-label" data-step="2">Booking Details</small>
                                <small class="step-label" data-step="3">Payment & Confirmation</small>
                            </div>
                            <div class="progress" style="height: 6px;">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 33%"
                                    id="bookingProgress"></div>
                            </div>
                        </div>

                        <form id="bookingForm">
                            <!-- Step 1: Guest Information -->
                            <div class="form-step" data-step="1">
                                <h5 class="mb-3"><i class="fas fa-user me-2"></i>Primary Guest Information</h5>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">First Name *</label>
                                        <input type="text" class="form-control" name="first_name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Last Name *</label>
                                        <input type="text" class="form-control" name="last_name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Middle Name</label>
                                        <input type="text" class="form-control" name="middle_name">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Suffix</label>
                                        <select class="form-select" name="suffix">
                                            <option value="">None</option>
                                            <option value="Jr.">Jr.</option>
                                            <option value="Sr.">Sr.</option>
                                            <option value="II">II</option>
                                            <option value="III">III</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Date of Birth *</label>
                                        <input type="date" class="form-control" name="date_of_birth" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email Address *</label>
                                        <input type="email" class="form-control" name="email" required>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Phone Number *</label>
                                        <input type="tel" class="form-control" name="phone_number" required
                                            placeholder="+63 XXX XXX XXXX">
                                    </div>

                                    <div class="col-12">
                                        <hr>
                                        <h6><i class="fas fa-id-card me-2"></i>Identification Details</h6>
                                    </div>

                                    <div class="col-md-6">
                                        <label class="form-label">ID Type *</label>
                                        <select class="form-select" name="id_type" required>
                                            <option value="">Select ID Type</option>
                                            <option value="Driver's License">Driver's License</option>
                                            <option value="Passport">Passport</option>
                                            <option value="National ID">National ID</option>
                                            <option value="Student ID">Student ID</option>
                                            <option value="Senior Citizen ID">Senior Citizen ID</option>
                                            <option value="PWD ID">PWD ID</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">ID Number *</label>
                                        <input type="text" class="form-control" name="id_number" required>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">ID Picture *</label>
                                        <input type="file" class="form-control" name="id_picture" accept="image/*"
                                            required>
                                        <small class="text-muted">Upload a clear photo of your ID (front side)</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 2: Booking Details -->
                            <div class="form-step d-none" data-step="2">
                                <h5 class="mb-3"><i class="fas fa-calendar-alt me-2"></i>24-Hour Booking Details</h5>

                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>24-Hour Slot System:</strong> Your stay begins at your chosen check-in time
                                    and automatically ends 24 hours later.
                                </div>

                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Check-in Date *</label>
                                        <input type="date" class="form-control" name="checkin_date" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Check-in Time *</label>
                                        <input type="time" class="form-control" name="checkin_time" required>
                                        <small class="text-muted">Choose your preferred arrival time</small>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Number of Guests *</label>
                                        <select id="guestSelect" class="form-select" name="guests" required>
                                            <option value="">Select number of guests</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Check-out Time</label>
                                        <input type="text" class="form-control" id="checkoutTimeDisplay" readonly
                                            style="background-color: #f8f9fa;" placeholder="Auto-calculated">
                                        <small class="text-muted">Automatically calculated (24 hours later)</small>
                                    </div>
                                </div>

                                <!-- Stay Duration Summary -->
                                <div class="card bg-light mt-4">
                                    <div class="card-body">
                                        <h6 class="card-title"><i class="fas fa-clock me-2"></i>Your 24-Hour Stay
                                            Summary</h6>
                                        <div id="stayDurationSummary">
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="border-end">
                                                        <div class="text-primary fw-bold">Check-in</div>
                                                        <div id="displayCheckinDateTime" class="small text-muted">Select
                                                            date & time</div>
                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <div class="border-end">
                                                        <div class="text-success fw-bold">Duration</div>
                                                        <div class="small text-muted">24 Hours</div>
                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <div class="text-warning fw-bold">Check-out</div>
                                                    <div id="displayCheckoutDateTime" class="small text-muted">
                                                        Auto-calculated</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 3: Payment & Confirmation -->
                            <div class="form-step d-none" data-step="3">
                                <h5 class="mb-3"><i class="fas fa-credit-card me-2"></i>Payment Method & Confirmation
                                </h5>

                                <div class="payment-methods mb-4">
                                    <h6>Choose Payment Method</h6>
                                    <div class="payment-option mb-3">
                                        <input type="radio" class="btn-check" name="payment_method" id="ewallet"
                                            value="ewallet" required>
                                        <label class="btn btn-outline-primary w-100 text-start p-3" for="ewallet">
                                            <i class="fas fa-mobile-alt me-3"></i>
                                            <span class="payment-name">E-Wallet</span>
                                            <br><small class="text-muted">GCash, Maya, GoTyme</small>
                                        </label>
                                    </div>
                                    <div class="payment-option mb-3">
                                        <input type="radio" class="btn-check" name="payment_method" id="bank"
                                            value="bank" required>
                                        <label class="btn btn-outline-primary w-100 text-start p-3" for="bank">
                                            <i class="fas fa-university me-3"></i>
                                            <span class="payment-name">Bank Transfer</span>
                                            <br><small class="text-muted">Direct bank payment</small>
                                        </label>
                                    </div>
                                </div>

                                <!-- Final Confirmation -->
                                <div class="card border-primary">
                                    <div class="card-header bg-primary text-white">
                                        <h6 class="mb-0"><i class="fas fa-check-circle me-2"></i>24-Hour Booking
                                            Confirmation
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div id="finalConfirmationSummary">
                                            <!-- Will be populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hidden Fields -->
                            <input type="hidden" name="room_type" id="roomTypeHidden">
                            <input type="hidden" name="room_price" id="roomPriceHidden">

                            <!-- Navigation Buttons -->
                            <div class="d-flex gap-2 mt-4">
                                <button type="button" class="btn btn-secondary" id="prevBtn" style="display: none;">
                                    <i class="fas fa-arrow-left me-2"></i>Previous
                                </button>
                                <button type="button" class="btn btn-primary flex-fill" id="nextBtn">
                                    Continue <i class="fas fa-arrow-right ms-2"></i>
                                </button>
                                <button type="submit" class="btn btn-success flex-fill d-none" id="submitBtn">
                                    <i class="fas fa-check me-2"></i>Confirm 24-Hour Booking
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Booking Summary Sidebar -->
            <div class="col-lg-4">
                <div class="card sticky-top" style="top: 100px;">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="fas fa-receipt me-2"></i>24-Hour Booking Summary</h5>
                    </div>
                    <div class="card-body">
                        <div id="bookingSummaryContent">
                            <div class="text-center text-muted">
                                <i class="fas fa-spinner fa-spin mb-2"></i>
                                <p>Loading booking details...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be injected here -->
    <!-- <div id="footer-container"></div> -->

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Load utilities first -->
    <script src="../../../assets/js/main.js"></script>
    <script src="../../../assets/js/components.js"></script>

    <!-- Fallback room data -->
    <script>
        // Ensure RoomData is available
        window.RoomData = window.RoomData || {
            rooms: {
                'regular': {
                    id: 'regular',
                    title: 'Regular Room',
                    description: 'A comfortable standard room with all essential amenities.',
                    price: 3000,
                    capacity: 2,
                    size: '25 m²',
                    checkIn: '2:00 PM',
                    checkOut: '12:00 PM',
                    period: 'night',
                    image: '../assets/images/regular-room.jpg',
                    features: ['Queen-sized bed', 'Air conditioning', 'Flat-screen TV', 'Free Wi-Fi', 'Private bathroom', 'Daily housekeeping']
                },
                'deluxe': {
                    id: 'deluxe',
                    title: 'Deluxe Room',
                    description: 'Spacious deluxe room with upgraded amenities and city views.',
                    price: 5000,
                    capacity: 3,
                    size: '35 m²',
                    checkIn: '2:00 PM',
                    checkOut: '12:00 PM',
                    period: 'night',
                    image: '../assets/images/deluxe-room.jpg',
                    features: ['King-sized bed', 'Premium air conditioning', 'Large flat-screen TV', 'High-speed Wi-Fi', 'Luxury bathroom with tub', 'Mini bar', 'Coffee maker', 'Daily housekeeping']
                },
                'suite': {
                    id: 'suite',
                    title: 'Executive Suite',
                    description: 'Luxurious suite with separate living area and premium amenities.',
                    price: 8000,
                    capacity: 4,
                    size: '50 m²',
                    checkIn: '12:00 PM',
                    checkOut: '2:00 PM',
                    period: 'night',
                    image: '../assets/images/suite-room.jpg',
                    features: ['King-sized bed', 'Separate living area', 'Climate control', '55-inch smart TV', 'High-speed Wi-Fi', 'Luxury bathroom with jacuzzi', 'Mini bar', 'Coffee maker', 'Work desk', 'Daily housekeeping', 'Bathrobes and slippers', 'Welcome fruits']
                }
            },
            getRoomByType: function (type) {
                return this.rooms[type] || this.rooms['regular'];
            },
            getRoomData: function (type) {
                return this.getRoomByType(type);
            },
            getDownPayment: function (type) {
                const room = this.getRoomByType(type);
                return room ? room.price * 0.5 : 0;
            }
        };
    </script>

    <!-- Load booking handler -->
    <script src="../assets/js/booking-form-handler.js"></script>
</body>

</html>